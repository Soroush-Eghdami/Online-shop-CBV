{% extends "base.html" %}

{% block title %}Checkout - Ecom Shop{% endblock %}

{% block content %}
<div class="checkout-container">
    <div class="checkout-header">
        <h1>üõí Checkout</h1>
        <p>Complete your order in just a few steps</p>
    </div>
    
    <div class="checkout-content">
        <div class="checkout-main">
            <div class="checkout-steps">
                <div class="step active">
                    <div class="step-number">1</div>
                    <span>Personal Info</span>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <span>Shipping</span>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <span>Payment</span>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <span>Confirm</span>
                </div>
            </div>
            
            <form action="." method="post" class="checkout-form">
                {% csrf_token %}
                
                <div class="form-section">
                    <div class="section-header">
                        <h3>üë§ Personal Information</h3>
                        <p>Tell us how to contact you</p>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <div class="input-group">
                                <i class="input-icon">üë§</i>
                                {{ form.first_name }}
                                <label class="floating-label">First Name</label>
                            </div>
                        </div>
                        
                        <div class="form-group half">
                            <div class="input-group">
                                <i class="input-icon">üë§</i>
                                {{ form.last_name }}
                                <label class="floating-label">Last Name</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-group">
                            <i class="input-icon">üìß</i>
                            {{ form.email }}
                            <label class="floating-label">Email Address</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <div class="section-header">
                        <h3>üöö Shipping Address</h3>
                        <p>Where should we deliver your order?</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-group">
                            <i class="input-icon">üìç</i>
                            {{ form.address }}
                            <label class="floating-label">Street Address</label>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group half">
                            <div class="input-group">
                                <i class="input-icon">üèôÔ∏è</i>
                                {{ form.city }}
                                <label class="floating-label">City</label>
                            </div>
                        </div>
                        
                        <div class="form-group half">
                            <div class="input-group">
                                <i class="input-icon">üìÆ</i>
                                {{ form.postal_code }}
                                <label class="floating-label">Postal Code</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="checkout-actions">
                    <a href="{% url 'cart:cart_detail' %}" class="btn btn-secondary">
                        <i class="btn-icon">‚Üê</i>
                        <span>Back to Cart</span>
                    </a>
                    
                    <button type="submit" class="btn btn-primary btn-large">
                        <span>Complete Order</span>
                        <i class="btn-icon">üí≥</i>
                    </button>
                </div>
            </form>
        </div>
        
        <div class="checkout-sidebar">
            <div class="order-summary">
                <h3>üìã Order Summary</h3>
                
                <div class="order-items">
                    {% for item in cart %}
                        <div class="order-item">
                            <div class="item-image">
                                {% if item.product.image %}
                                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}">
                                {% else %}
                                    <div class="no-image">üì¶</div>
                                {% endif %}
                            </div>
                            <div class="item-details">
                                <h4>{{ item.product.name }}</h4>
                                <p>Qty: {{ item.quantity }}</p>
                                <span class="item-price">${{ item.total_price|floatformat:2 }}</span>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
                <div class="order-totals">
                    <div class="total-row">
                        <span>Subtotal:</span>
                        <span>${{ cart.get_total_price|floatformat:2 }}</span>
                    </div>
                    <div class="total-row">
                        <span>Shipping:</span>
                        <span class="free-shipping">FREE</span>
                    </div>
                    <div class="total-row total">
                        <span>Total:</span>
                        <span>${{ cart.get_total_price|floatformat:2 }}</span>
                    </div>
                </div>
                
                <div class="security-badges">
                    <div class="badge">
                        <i class="badge-icon">üîí</i>
                        <span>Secure Checkout</span>
                    </div>
                    <div class="badge">
                        <i class="badge-icon">üöö</i>
                        <span>Free Shipping</span>
                    </div>
                    <div class="badge">
                        <i class="badge-icon">‚Ü©Ô∏è</i>
                        <span>Easy Returns</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
